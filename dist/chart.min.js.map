{"version":3,"file":"chart.js","sources":["chart.js","/source/chart.js"],"names":["global","factory","exports","module","require","define","amd","KotoTooltip","d3","koto","this","configs","name","description","type","value","Tooltip","_koto$Base","selection","getTopLocationsAndPath","tooltipPositionObj","containerWidth","path","translate","translateX","translateY","getPathTranslate","hittingRight","hittingLeft","offsetX","_Chart","config","topY","_topPath","_moveX","updateCaretPath","getRightPositionAndPath","containerHeight","hittingBottom","hittingTop","centerY","rightX","_rightPath","_moveY","getBottomPositionAndPath","bottomY","_bottomPath","getLeftPositionAndPath","leftX","_leftPath","calPositionAndPath","location","positionAndPath","determineInboundsTooltipLocation","closeToTop","closeToRight","closeToLeft","closeToBottom","getTooltipPositionStatus","point","rectBBox","_gBBox","offsetY","y","_baseGroupBBox","height","x","width","offsetPadding","_caretWidth","setBaseGroupBBoxDimensions","isTextRectText","appends","returnVal","i","node","childNodes","length","nodeName","formatAppendTextRectText","padding","prevWidth","groupBBox","select","attr","getBBox","element","dy","getCentralPosition","selectAll","transform","setBaseGroupBBox","cloneBBox","_baseGroup","setGBBox","undefined","_appends","elem","parseInt","style","hittingEdge1","hittingEdge2","offset","dimension","heightOrWidth","r","axis","pathString","xyString","caretX","caretY","match","replace","offsetCaretAtEdge","tooltipWidth","tooltipHeight","bboxWidth","bboxHeight","container","mouseXOffset","mouseYOffset","curvedRectOffset","farthestCaretPosition","left","right","top","bottom","generatePaths","w","h","c","box","_get","Object","getPrototypeOf","prototype","call","forEach","set","base","formats","default","text","textBBox","textBlock","textElement","getBoundingClientRect","domoStrings","wrapText","textRectText","append","_parent","parentNode","_drawn","on","contains","removeChild","appendChild","_container","_containerBBox","d","newWidth","newHeight","baseGroup","posAndPathObj","Base","chart"],"mappings":"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","sourceRoot":"/source/","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('d3'), require('koto')) :\n  typeof define === 'function' && define.amd ? define(['d3', 'koto'], factory) :\n  global.KotoTooltip = factory(global.d3, global.koto)\n}(this, function (d3, koto) { 'use strict';\n\n  var configs = [{\n    name : 'chartName',\n    description: 'Name of chart for Reporting.',\n    type: 'string',\n    value: 'Dropdown'\n  }, {\n    name: 'opacity',\n    description: 'Opacity of the tooltip. Useful for testing',\n    type: 'number',\n    value: 0\n  }, {\n    name: 'padding',\n      description: 'Padding for the group that goes into the tooltip',\n      type: 'number',\n      value: 7\n  }, {\n    name: 'caretSize',\n    description: 'Size of the caret on the tooltip',\n    type: 'number',\n    value: 5\n  }, {\n    name: 'stationary',\n    description: 'True if you want the tooltip stationary',\n    type: 'boolean',\n    value: false\n  }, {\n    name: 'maxWidth',\n    description: 'Max width for the tooltip',\n    type: 'number',\n    value: 200\n  }, {\n    name: 'format',\n    description: 'Format for the group in the tooltip',\n    type: 'string',\n    value: 'default'\n  }, {\n    name: 'tooltipBackgroundColor',\n    description: 'The background color for the tooltip',\n    type: 'color',\n    value: '#fff'\n  }];\n\n  /* exported d3 */\n  class Tooltip extends koto.Base {\n    constructor(selection) {\n      super(selection);\n\n      var _Chart = this;\n\n      // load configs\n      configs.forEach(function (config) {\n        _Chart.configs.set(config.name, config);\n      });\n      // needs a reference to base I included this one here.\n      _Chart.configs.set('container', {\n        description: 'Container for the tooltip to get its bounds from',\n        type: 'd3 selected element',\n        value: this.base\n      });\n\n      // Setup\n      var formats = {\n        default: function () {},\n        text: function (appends) {\n          //Automatically position if there is only one text element appended\n          if (appends[0].length === 1 && appends.node().childNodes[0].nodeName === 'text') {\n\n            var textBBox = appends.node().childNodes[0].getBBox();\n\n            appends.select('text')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                y: textBBox.height / 2\n              });\n            appends.selectAll('tspan')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                y: textBBox.height / 2\n              });\n          }\n        },\n        textBlock: function (appends) {\n\n          var textElement = appends.select('text');\n          var dy = textElement.node().getBoundingClientRect().height;\n          d3.domoStrings.wrapText(textElement, _Chart.config('maxWidth'));\n\n          appends.select('text').attr({\n            y: dy - (dy / 4)\n          });\n        },\n        textRectText: function (appends) {\n          //Automatically format for text rect text pattern\n          if (appends.node().childNodes.length % 2 !== 0) {\n\n            if (isTextRectText(appends)) {\n              formatAppendTextRectText(appends);\n            }\n\n          }\n        }\n      };\n\n      var r = 3; //Radius to round the rect\n\n      this._baseGroup = this.base.append('g')\n        .attr('transform', 'translate(0, 0)')\n        .style('pointer-events', 'none');\n\n      _Chart._parent = _Chart._baseGroup.node().parentNode;\n\n      this._baseGroup.append('path')\n        .attr('class', 'toolTipPath')\n        .style('opacity', 0.9);\n\n      this._appends = this._baseGroup.append('g');\n\n      _Chart._drawn = false;\n      _Chart._moveX = undefined;\n      _Chart._moveY = undefined;\n\n      /**\n       * This will hide the tooltip properly\n       */\n      this.on('remove', function () {\n        _Chart._drawn = false;\n\n        if (d3.select('html').node().contains(_Chart._baseGroup.node())) {\n          _Chart._parent.removeChild(_Chart._baseGroup.node());\n        }\n      });\n\n\n\n      /**\n       * This will re-draw the tool tip with the correct dimensions around the _appends group\n       * @param  {number} width  override the width of the container\n       * @param  {number} height  override the height of the container\n       */\n      this.on('draw', function (width, height) {\n        _Chart._parent.appendChild(_Chart._baseGroup.node());\n\n        _Chart._container = _Chart.config('container');\n        _Chart._caretWidth = _Chart.config('caretSize') * 2;\n        _Chart._containerBBox = _Chart.config('container').node().getBoundingClientRect();\n\n        //Format\n        _Chart._baseGroup.select('.toolTipPath').style('fill', _Chart.config('tooltipBackgroundColor'));\n        _Chart._appends.attr('transform', 'translate(' + _Chart.config('padding') + ', ' + _Chart.config('padding') + ')');\n        formats[_Chart.config('format')](_Chart._appends);\n\n        setGBBox(height, width);\n        setBaseGroupBBox();\n        generatePaths();\n\n        _Chart._baseGroup\n          .select('.toolTipPath')\n          .attr({\n            'transform': _Chart._topPath.translate,\n            d: _Chart._topPath.path\n          });\n\n        _Chart._drawn = true;\n      });\n\n\n\n      /**\n       * This will move the tooltip wherever you will it to be\n       * @param  {object} point     Object with an x and y\n       * @param  {string} location  String that will overide the location of the tooltip\n       * @param  {number} newWidth  This will override the width of the tooltip's bounds\n       * @param  {number} newHeight This will override the height of the tooltip's bounds\n       */\n      this.on('moveTo', function (point, location, newWidth, newHeight) {\n        setBaseGroupBBoxDimensions(location);\n\n        if (_Chart._drawn) {\n\n          var containerWidth = newWidth ? newWidth : _Chart._containerBBox.width;\n          var containerHeight = newHeight ? newHeight : _Chart._containerBBox.height;\n          var baseGroup = _Chart._baseGroup;\n          var tooltipPositionObj = getTooltipPositionStatus(containerWidth, containerHeight, point);\n\n          if (!location) {\n            location = determineInboundsTooltipLocation(tooltipPositionObj);\n          }\n\n          offsetCaretAtEdge({\n            left: tooltipPositionObj.hittingLeft,\n            right: tooltipPositionObj.hittingRight,\n            top: tooltipPositionObj.hittingTop,\n            bottom: tooltipPositionObj.hittingBottom,\n            container: {\n              height: containerHeight,\n              width: containerWidth\n            },\n            point: point\n          });\n\n          var posAndPathObj = calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth);\n\n          baseGroup.attr('transform', 'translate(' + posAndPathObj.translateX + ',' + posAndPathObj.translateY + ')');\n\n          baseGroup\n            .select('.toolTipPath')\n            .attr({\n              'transform': posAndPathObj.translate,\n              d: posAndPathObj.path\n            });\n        }\n\n      });\n\n\n      /*----------------------------------------------------------------------------------\n      // MoveTo Helper Functions\n      ----------------------------------------------------------------------------------*/\n\n      /**\n       * getTopLocationsAndPath\n       */\n      function getTopLocationsAndPath(tooltipPositionObj, containerWidth) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateX = getPathTranslate(\n          tooltipPositionObj.hittingRight,\n          tooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize'))),\n          'width',\n          containerWidth\n        );\n\n        translateY = tooltipPositionObj.topY;\n        translate = _Chart._topPath.translate;\n\n        if (_Chart._moveX !== 0) {\n          path = updateCaretPath('_topPath', 'x');\n        } else {\n          path = _Chart._topPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * getRightPositionAndPath\n       */\n      function getRightPositionAndPath(tooltipPositionObj, containerHeight) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateY = getPathTranslate(\n          tooltipPositionObj.hittingBottom,\n          tooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n          'height',\n          containerHeight\n        );\n\n        translateX = tooltipPositionObj.rightX;\n        translate = _Chart._rightPath.translate;\n\n        if (_Chart._moveY !== 0) {\n          path = updateCaretPath('_rightPath', 'y');\n        } else {\n          path = _Chart._rightPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * getBottomPositionAndPath\n       */\n      function getBottomPositionAndPath(tooltipPositionObj, containerWidth) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateX = getPathTranslate(\n          tooltipPositionObj.hittingRight,\n          tooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize') / 2)),\n          'width',\n          containerWidth\n        );\n\n        translateY = (tooltipPositionObj.bottomY + _Chart.config('padding')) + 5;\n        translate = _Chart._bottomPath.translate;\n\n        if (_Chart._moveX !== 0) {\n          path = updateCaretPath('_bottomPath', 'x');\n        } else {\n          path = _Chart._bottomPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n      /**\n       * getLeftPositionAndPath\n       */\n      function getLeftPositionAndPath(tooltipPositionObj, containerHeight) {\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateY = getPathTranslate(\n          tooltipPositionObj.hittingBottom,\n          tooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n          'height',\n          containerHeight\n        );\n\n        translateX = tooltipPositionObj.leftX;\n        translate = _Chart._leftPath.translate;\n\n        if (_Chart._moveY !== 0) {\n          path = updateCaretPath('_leftPath', 'y');\n        } else {\n          path = _Chart._leftPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * Returns the tooltips draw position and path given the current draw location.\n       *\n       * @param location\n       * @param tooltipPositionObj\n       * @param containerHeight\n       * @returns {{translateX: *, translateY: *, translate: *, path: *}}\n       */\n      function calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth) {\n\n        var positionAndPath;\n\n        switch (location) {\n        case 'top':\n          {\n            positionAndPath = getTopLocationsAndPath(tooltipPositionObj, containerWidth);\n            break;\n          }\n        case 'right':\n          {\n            positionAndPath = getRightPositionAndPath(tooltipPositionObj, containerHeight);\n            break;\n          }\n        case 'bottom':\n          {\n            positionAndPath = getBottomPositionAndPath(tooltipPositionObj, containerWidth);\n            break;\n          }\n        case 'left':\n          {\n            positionAndPath = getLeftPositionAndPath(tooltipPositionObj, containerHeight);\n            break;\n          }\n        }\n\n        return positionAndPath;\n      }\n\n\n      /**\n       * Determine the direction the tooltip should draw given its location.\n       * @param tooltipPositionObj\n       * @returns {string}\n       */\n      function determineInboundsTooltipLocation(tooltipPositionObj) {\n\n        var location = 'top';\n        if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && !tooltipPositionObj.closeToTop) {\n          location = 'top';\n        } else if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && tooltipPositionObj.closeToTop) {\n          location = 'bottom';\n        } else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToRight) {\n          location = 'left';\n        } else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToLeft) {\n          location = 'right';\n        } else if (!tooltipPositionObj.hittingRight && tooltipPositionObj.closeToRight) {\n          location = 'left';\n        } else if (!tooltipPositionObj.hittingLeft && tooltipPositionObj.closeToLeft) {\n          location = 'right';\n        } else if (tooltipPositionObj.closeToBottom && tooltipPositionObj.closeToTop) {\n          location = 'top';\n        } else if (tooltipPositionObj.closeToTop) {\n          location = 'bottom';\n        }\n\n        return location;\n      }\n\n\n      /**\n       * getTooltipPositionStatus\n       */\n      function getTooltipPositionStatus(containerWidth, containerHeight, point) {\n        var rectBBox = _Chart._gBBox;\n\n        var offsetY = point.y - _Chart._baseGroupBBox.height;\n        var offsetX = point.x - _Chart._baseGroupBBox.width / 2;\n        var offsetPadding = _Chart._caretWidth;\n\n        var topY = offsetY - offsetPadding;\n        var bottomY = point.y + offsetPadding;\n        var centerY = point.y - rectBBox.height / 2;\n        var leftX = point.x - _Chart._baseGroupBBox.width - _Chart.config('caretSize');\n        var rightX = point.x + offsetPadding + 5;\n\n        var closeToRight = point.x + _Chart._baseGroupBBox.width / 2 >= containerWidth;\n        var closeToLeft = point.x - _Chart._baseGroupBBox.width / 2 <= 0;\n        var closeToTop = point.y - _Chart._baseGroupBBox.height - offsetPadding - 3 <= 0;\n        var closeToBottom = point.y + _Chart._baseGroupBBox.height > containerHeight;\n\n        var hittingRight = closeToRight && point.x - _Chart._baseGroupBBox.width - offsetPadding <= 0;\n        var hittingLeft = closeToLeft && point.x + _Chart._baseGroupBBox.width + offsetPadding >= containerWidth;\n        var hittingTop = (closeToRight || closeToLeft) && (point.y - (_Chart._baseGroupBBox.height / 2) <= 0);\n        var hittingBottom = (closeToRight || closeToLeft) && (point.y + (_Chart._baseGroupBBox.height / 2) >= containerHeight);\n\n        return {\n          offsetX: offsetX,\n          topY: topY,\n          bottomY: bottomY,\n          centerY: centerY,\n          leftX: leftX,\n          rightX: rightX,\n          closeToRight: closeToRight,\n          closeToLeft: closeToLeft,\n          closeToTop: closeToTop,\n          closeToBottom: closeToBottom,\n          hittingRight: hittingRight,\n          hittingLeft: hittingLeft,\n          hittingTop: hittingTop,\n          hittingBottom: hittingBottom\n        };\n      }\n\n\n      /**\n       * SetBaseGroupBBoxDimensions\n       * @param location position of the tooltip\n       */\n      function setBaseGroupBBoxDimensions(location) {\n        _Chart._baseGroupBBox.height =\n          location === 'top' || location === 'bottom' ?\n          _Chart._gBBox.height + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6 :\n          _Chart._gBBox.height + (_Chart.config('padding') * 2) + 6;\n\n        _Chart._baseGroupBBox.width =\n          location === 'top' || location === 'bottom' ?\n          _Chart._gBBox.width + (_Chart.config('padding') * 2) + 6 :\n          _Chart._gBBox.width + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6;\n      }\n\n\n\n\n\n      /*----------------------------------------------------------------------------------\n      // Helper Functions\n      ----------------------------------------------------------------------------------*/\n\n      /**\n       * Returns if appends is in text rect text format\n       * @param appends\n       * @returns {boolean}\n       */\n      function isTextRectText(appends) {\n        var returnVal = true;\n        for (var i = 0; i < appends.node().childNodes.length; i++) {\n          var nodeName = appends.node().childNodes[i].nodeName;\n          returnVal = (i % 2 === 0 && nodeName === 'text' ? true : (nodeName === 'rect'));\n          if (!returnVal) {\n            break;\n          }\n        }\n        return returnVal;\n      }\n\n      /**\n       * Formats appends as text rect text\n       * @param appends\n       * @param groupBBox\n       */\n      function formatAppendTextRectText(appends) {\n        var padding = 5;\n        var prevWidth = 0;\n        var groupBBox = {\n          x: 0,\n          y: 0,\n          height: 0,\n          width: 0\n        };\n\n        appends.select('rect').attr('height', 0);\n        groupBBox = appends.node().getBBox();\n\n\n        /*jshint -W083 */\n        for (var i = 0; i < appends.node().childNodes.length; i++) {\n          var element = appends.node().childNodes[i];\n\n          if (i % 2 === 0) {\n            //text\n            appends.select('text:nth-child(' + (i + 1) + ')')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                x: (prevWidth + (padding * i) + 1),\n                y: groupBBox.height / 2\n              });\n\n            prevWidth += element.getBBox().width;\n\n          } else {\n            //rect\n            appends.select('rect:nth-child(' + (i + 1) + ')')\n              .attr({\n                x: (prevWidth + (padding * i)),\n                y: 0,\n                width: 1,\n                height: groupBBox.height\n              });\n          }\n        }\n\n        appends.selectAll('tspan')\n          .attr({\n            transform: function () {\n              return 'translate(0, ' + getCentralPosition(this) + ')';\n            },\n            y: groupBBox.height / 2\n          });\n      }\n\n\n      /**\n       * setBaseGroupBBox\n       */\n      function setBaseGroupBBox() {\n        _Chart._baseGroupBBox = cloneBBox(_Chart._baseGroup.node().getBBox());\n        _Chart._baseGroupBBox.height = _Chart._baseGroupBBox.height - _Chart._caretWidth + 3;\n      }\n\n\n      /**\n       * Set gBBox's height and width to height, width if defined else\n       * it will use appends BBox.\n       * @param height\n       * @param width\n       */\n      function setGBBox(height, width) {\n        if (height !== undefined && width !== undefined) {\n          _Chart._gBBox = {\n            'height': height,\n            'width': width\n          };\n        } else {\n          _Chart._gBBox = _Chart._appends.node().getBBox();\n        }\n      }\n\n\n      /**\n       * Calculates vertical center for text\n       * @param elem\n       * @returns {number}\n       */\n      function getCentralPosition(elem) {\n        return parseInt(d3.select(elem)\n          .style('font-size'), 10) * 0.35;\n      }\n\n      /**\n       * Returns a tranlate that keeps the path in bounds.\n       * @param hittingEdge1\n       * @param hittingEdge2\n       * @param offset\n       * @param dimension\n       * @param heightOrWidth\n       * @returns {*}\n       */\n      function getPathTranslate(hittingEdge1, hittingEdge2, offset, dimension, heightOrWidth) {\n        var translate;\n\n        if (hittingEdge1) {\n          translate = heightOrWidth - _Chart._baseGroupBBox[dimension] + r;\n        } else if (hittingEdge2) {\n          translate = r;\n        } else {\n          translate = offset;\n        }\n\n        return translate;\n      }\n\n      /**\n       * UpdateCaretPath\n       * @param path\n       * @param axis\n       * @returns {.autoshot.default_options.options.path|*|.autoshot.default_options.options.local.path|options.path|options.local.path|path}\n       */\n      function updateCaretPath(path, axis) {\n        var pathString;\n        var xyString;\n\n        if (axis === 'y') {\n          xyString = _Chart[path].caretX + ' ' + (_Chart[path].caretY - _Chart._moveY);\n        } else {\n          xyString = (_Chart[path].caretX + _Chart._moveX) + ' ' + _Chart[path].caretY;\n        }\n\n        pathString = _Chart[path].path.match(/Z m (.*?) l/);\n        _Chart[path].path = _Chart[path].path.replace(pathString[1], xyString);\n        return _Chart[path].path;\n      }\n\n\n      /**\n       * OffsetCaretAtEdge\n       * @param config\n       */\n      function offsetCaretAtEdge(config) {\n        var container = config.container;\n        var point = config.point;\n        var tooltipWidth;\n        var tooltipHeight;\n        var bboxWidth;\n        var bboxHeight;\n        var mouseXOffset = container.width - point.x;\n        var mouseYOffset = point.y;\n\n        var curvedRectOffset = 2 * r; //Compensate for the curved rect path. 1 is for good measure.\n\n        bboxHeight = _Chart._gBBox.height; // - curvedRectOffset;\n        bboxWidth = _Chart._gBBox.width; //  - curvedRectOffset;\n\n\n        var farthestCaretPosition;\n\n        if (config.left || config.right) {\n\n          //Left\n          if (config.left) {\n            tooltipWidth = container.width - (_Chart._baseGroupBBox.width / 2);\n            _Chart._moveX = tooltipWidth - mouseXOffset;\n\n            if ((bboxWidth / 2) + _Chart.config('caretSize') <= _Chart._moveX) {\n              _Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n            }\n          }\n\n          //Right\n          if (config.right) {\n            tooltipWidth = _Chart._baseGroupBBox.width / 2;\n            _Chart._moveX = tooltipWidth - mouseXOffset;\n\n            if (-((bboxWidth / 2) + _Chart.config('caretSize')) >= _Chart._moveX) {\n              _Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n            }\n          }\n\n\n        } else if (config.top || config.bottom) {\n\n          //Top\n          if (config.top) {\n            tooltipHeight = _Chart._baseGroupBBox.height / 2;\n            _Chart._moveY = tooltipHeight - mouseYOffset;\n\n            farthestCaretPosition = (bboxHeight / 2) + _Chart.config('caretSize') - curvedRectOffset;\n\n            if (farthestCaretPosition <= _Chart._moveY) {\n              _Chart._moveY = farthestCaretPosition;\n            }\n          }\n\n          //Bottom\n          if (config.bottom) {\n            tooltipHeight = container.height - ((_Chart._baseGroupBBox.height) / 2);\n            _Chart._moveY = tooltipHeight - mouseYOffset;\n\n            farthestCaretPosition = -(((bboxHeight) / 2) - _Chart.config('caretSize')) - curvedRectOffset;\n\n            if (farthestCaretPosition >= _Chart._moveY) {\n              _Chart._moveY = farthestCaretPosition;\n            }\n          }\n        } else {\n          _Chart._moveX = 0;\n          _Chart._moveY = 0;\n        }\n      }\n\n\n      /**\n       * GeneratePaths\n       */\n      function generatePaths() {\n        var w = _Chart._gBBox.width + (_Chart.config('padding') * 2);\n        var h = _Chart._gBBox.height + (_Chart.config('padding') * 2);\n        var c = _Chart.config('caretSize');\n        var y = (h / 2) + _Chart.config('caretSize') + r;\n\n        _Chart._topPath = {\n          translate: 'translate(' + (w / 2) + ',' + (h + c + r) + ')',\n          caretX: ((w / 2) - c),\n          caretY: (h + (r * 2))\n        };\n        _Chart._topPath.path = 'm -' + (w / 2) + ' -' + (h + c + (r * 2)) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._topPath.caretX + ' ' + _Chart._topPath.caretY +\n          ' l ' + c + ' ' + c +\n          ' l ' + c + ' -' + c;\n\n        _Chart._bottomPath = {\n          translate: 'translate(' + (w / 2) + ',' + (-c + (r / 2)) + ')',\n          caretX: ((w / 2) - c),\n          caretY: 0\n        };\n        _Chart._bottomPath.path = 'm -' + (w / 2) + ' ' + 0 +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._bottomPath.caretX + ' ' + _Chart._bottomPath.caretY +\n          ' l ' + c + ' -' + c +\n          ' l ' + c + ' ' + c;\n\n        _Chart._leftPath = {\n          translate: 'translate(' + (w + c + r) + ',' + (h / 2) + ')',\n          caretX: (w + r),\n          caretY: y\n        };\n        _Chart._leftPath.path = 'm -' + (w + c + r) + ' ' + -((h / 2) + r) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._leftPath.caretX + ' ' + _Chart._leftPath.caretY +\n          ' l ' + c + ' -' + c +\n          ' l -' + c + ' -' + c;\n\n        _Chart._rightPath = {\n          translate: 'translate(' + -(c + r) + ',' + (h / 2) + ')',\n          caretX: -r,\n          caretY: y\n        };\n        _Chart._rightPath.path = 'm ' + (c + r) + ' ' + -((h / 2) + r) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._rightPath.caretX + ' ' + _Chart._rightPath.caretY +\n          ' l -' + c + ' -' + c +\n          ' l ' + c + ' -' + c + ' Z';\n      }\n\n      /**\n       * cloneBBox, IE will not let you modify the obj returned from getBBox\n       * @param box\n       * @returns {{x: *, y: *, width: *, height: *}}\n       */\n      function cloneBBox(box) {\n        return {\n          x: box.x,\n          y: box.y,\n          width: box.width,\n          height: box.height\n        };\n      }\n    }\n    preDraw() {\n      this._container = this.config('container');\n    }\n  }\n\n  // Export\n  var chart = Tooltip;\n\n  return chart;\n\n}));\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('d3'), require('koto')) :\n  typeof define === 'function' && define.amd ? define(['d3', 'koto'], factory) :\n  global.KotoTooltip = factory(global.d3, global.koto)\n}(this, function (d3, koto) { 'use strict';\n\n  var configs = [{\n    name : 'chartName',\n    description: 'Name of chart for Reporting.',\n    type: 'string',\n    value: 'Dropdown'\n  }, {\n    name: 'opacity',\n    description: 'Opacity of the tooltip. Useful for testing',\n    type: 'number',\n    value: 0\n  }, {\n    name: 'padding',\n      description: 'Padding for the group that goes into the tooltip',\n      type: 'number',\n      value: 7\n  }, {\n    name: 'caretSize',\n    description: 'Size of the caret on the tooltip',\n    type: 'number',\n    value: 5\n  }, {\n    name: 'stationary',\n    description: 'True if you want the tooltip stationary',\n    type: 'boolean',\n    value: false\n  }, {\n    name: 'maxWidth',\n    description: 'Max width for the tooltip',\n    type: 'number',\n    value: 200\n  }, {\n    name: 'format',\n    description: 'Format for the group in the tooltip',\n    type: 'string',\n    value: 'default'\n  }, {\n    name: 'tooltipBackgroundColor',\n    description: 'The background color for the tooltip',\n    type: 'color',\n    value: '#fff'\n  }];\n\n  /* exported d3 */\n  class Tooltip extends koto.Base {\n    constructor(selection) {\n      super(selection);\n\n      var _Chart = this;\n\n      // load configs\n      configs.forEach(function (config) {\n        _Chart.configs.set(config.name, config);\n      });\n      // needs a reference to base I included this one here.\n      _Chart.configs.set('container', {\n        description: 'Container for the tooltip to get its bounds from',\n        type: 'd3 selected element',\n        value: this.base\n      });\n\n      // Setup\n      var formats = {\n        default: function () {},\n        text: function (appends) {\n          //Automatically position if there is only one text element appended\n          if (appends[0].length === 1 && appends.node().childNodes[0].nodeName === 'text') {\n\n            var textBBox = appends.node().childNodes[0].getBBox();\n\n            appends.select('text')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                y: textBBox.height / 2\n              });\n            appends.selectAll('tspan')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                y: textBBox.height / 2\n              });\n          }\n        },\n        textBlock: function (appends) {\n\n          var textElement = appends.select('text');\n          var dy = textElement.node().getBoundingClientRect().height;\n          d3.domoStrings.wrapText(textElement, _Chart.config('maxWidth'));\n\n          appends.select('text').attr({\n            y: dy - (dy / 4)\n          });\n        },\n        textRectText: function (appends) {\n          //Automatically format for text rect text pattern\n          if (appends.node().childNodes.length % 2 !== 0) {\n\n            if (isTextRectText(appends)) {\n              formatAppendTextRectText(appends);\n            }\n\n          }\n        }\n      };\n\n      var r = 3; //Radius to round the rect\n\n      this._baseGroup = this.base.append('g')\n        .attr('transform', 'translate(0, 0)')\n        .style('pointer-events', 'none');\n\n      _Chart._parent = _Chart._baseGroup.node().parentNode;\n\n      this._baseGroup.append('path')\n        .attr('class', 'toolTipPath')\n        .style('opacity', 0.9);\n\n      this._appends = this._baseGroup.append('g');\n\n      _Chart._drawn = false;\n      _Chart._moveX = undefined;\n      _Chart._moveY = undefined;\n\n      /**\n       * This will hide the tooltip properly\n       */\n      this.on('remove', function () {\n        _Chart._drawn = false;\n\n        if (d3.select('html').node().contains(_Chart._baseGroup.node())) {\n          _Chart._parent.removeChild(_Chart._baseGroup.node());\n        }\n      });\n\n\n\n      /**\n       * This will re-draw the tool tip with the correct dimensions around the _appends group\n       * @param  {number} width  override the width of the container\n       * @param  {number} height  override the height of the container\n       */\n      this.on('draw', function (width, height) {\n        _Chart._parent.appendChild(_Chart._baseGroup.node());\n\n        _Chart._container = _Chart.config('container');\n        _Chart._caretWidth = _Chart.config('caretSize') * 2;\n        _Chart._containerBBox = _Chart.config('container').node().getBoundingClientRect();\n\n        //Format\n        _Chart._baseGroup.select('.toolTipPath').style('fill', _Chart.config('tooltipBackgroundColor'));\n        _Chart._appends.attr('transform', 'translate(' + _Chart.config('padding') + ', ' + _Chart.config('padding') + ')');\n        formats[_Chart.config('format')](_Chart._appends);\n\n        setGBBox(height, width);\n        setBaseGroupBBox();\n        generatePaths();\n\n        _Chart._baseGroup\n          .select('.toolTipPath')\n          .attr({\n            'transform': _Chart._topPath.translate,\n            d: _Chart._topPath.path\n          });\n\n        _Chart._drawn = true;\n      });\n\n\n\n      /**\n       * This will move the tooltip wherever you will it to be\n       * @param  {object} point     Object with an x and y\n       * @param  {string} location  String that will overide the location of the tooltip\n       * @param  {number} newWidth  This will override the width of the tooltip's bounds\n       * @param  {number} newHeight This will override the height of the tooltip's bounds\n       */\n      this.on('moveTo', function (point, location, newWidth, newHeight) {\n        setBaseGroupBBoxDimensions(location);\n\n        if (_Chart._drawn) {\n\n          var containerWidth = newWidth ? newWidth : _Chart._containerBBox.width;\n          var containerHeight = newHeight ? newHeight : _Chart._containerBBox.height;\n          var baseGroup = _Chart._baseGroup;\n          var tooltipPositionObj = getTooltipPositionStatus(containerWidth, containerHeight, point);\n\n          if (!location) {\n            location = determineInboundsTooltipLocation(tooltipPositionObj);\n          }\n\n          offsetCaretAtEdge({\n            left: tooltipPositionObj.hittingLeft,\n            right: tooltipPositionObj.hittingRight,\n            top: tooltipPositionObj.hittingTop,\n            bottom: tooltipPositionObj.hittingBottom,\n            container: {\n              height: containerHeight,\n              width: containerWidth\n            },\n            point: point\n          });\n\n          var posAndPathObj = calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth);\n\n          baseGroup.attr('transform', 'translate(' + posAndPathObj.translateX + ',' + posAndPathObj.translateY + ')');\n\n          baseGroup\n            .select('.toolTipPath')\n            .attr({\n              'transform': posAndPathObj.translate,\n              d: posAndPathObj.path\n            });\n        }\n\n      });\n\n\n      /*----------------------------------------------------------------------------------\n      // MoveTo Helper Functions\n      ----------------------------------------------------------------------------------*/\n\n      /**\n       * getTopLocationsAndPath\n       */\n      function getTopLocationsAndPath(tooltipPositionObj, containerWidth) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateX = getPathTranslate(\n          tooltipPositionObj.hittingRight,\n          tooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize'))),\n          'width',\n          containerWidth\n        );\n\n        translateY = tooltipPositionObj.topY;\n        translate = _Chart._topPath.translate;\n\n        if (_Chart._moveX !== 0) {\n          path = updateCaretPath('_topPath', 'x');\n        } else {\n          path = _Chart._topPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * getRightPositionAndPath\n       */\n      function getRightPositionAndPath(tooltipPositionObj, containerHeight) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateY = getPathTranslate(\n          tooltipPositionObj.hittingBottom,\n          tooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n          'height',\n          containerHeight\n        );\n\n        translateX = tooltipPositionObj.rightX;\n        translate = _Chart._rightPath.translate;\n\n        if (_Chart._moveY !== 0) {\n          path = updateCaretPath('_rightPath', 'y');\n        } else {\n          path = _Chart._rightPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * getBottomPositionAndPath\n       */\n      function getBottomPositionAndPath(tooltipPositionObj, containerWidth) {\n\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateX = getPathTranslate(\n          tooltipPositionObj.hittingRight,\n          tooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize') / 2)),\n          'width',\n          containerWidth\n        );\n\n        translateY = (tooltipPositionObj.bottomY + _Chart.config('padding')) + 5;\n        translate = _Chart._bottomPath.translate;\n\n        if (_Chart._moveX !== 0) {\n          path = updateCaretPath('_bottomPath', 'x');\n        } else {\n          path = _Chart._bottomPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n      /**\n       * getLeftPositionAndPath\n       */\n      function getLeftPositionAndPath(tooltipPositionObj, containerHeight) {\n        var path;\n        var translate;\n        var translateX;\n        var translateY;\n\n        translateY = getPathTranslate(\n          tooltipPositionObj.hittingBottom,\n          tooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n          'height',\n          containerHeight\n        );\n\n        translateX = tooltipPositionObj.leftX;\n        translate = _Chart._leftPath.translate;\n\n        if (_Chart._moveY !== 0) {\n          path = updateCaretPath('_leftPath', 'y');\n        } else {\n          path = _Chart._leftPath.path;\n        }\n\n        return {\n          translateX: translateX,\n          translateY: translateY,\n          translate: translate,\n          path: path\n        };\n      }\n\n\n      /**\n       * Returns the tooltips draw position and path given the current draw location.\n       *\n       * @param location\n       * @param tooltipPositionObj\n       * @param containerHeight\n       * @returns {{translateX: *, translateY: *, translate: *, path: *}}\n       */\n      function calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth) {\n\n        var positionAndPath;\n\n        switch (location) {\n        case 'top':\n          {\n            positionAndPath = getTopLocationsAndPath(tooltipPositionObj, containerWidth);\n            break;\n          }\n        case 'right':\n          {\n            positionAndPath = getRightPositionAndPath(tooltipPositionObj, containerHeight);\n            break;\n          }\n        case 'bottom':\n          {\n            positionAndPath = getBottomPositionAndPath(tooltipPositionObj, containerWidth);\n            break;\n          }\n        case 'left':\n          {\n            positionAndPath = getLeftPositionAndPath(tooltipPositionObj, containerHeight);\n            break;\n          }\n        }\n\n        return positionAndPath;\n      }\n\n\n      /**\n       * Determine the direction the tooltip should draw given its location.\n       * @param tooltipPositionObj\n       * @returns {string}\n       */\n      function determineInboundsTooltipLocation(tooltipPositionObj) {\n\n        var location = 'top';\n        if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && !tooltipPositionObj.closeToTop) {\n          location = 'top';\n        } else if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && tooltipPositionObj.closeToTop) {\n          location = 'bottom';\n        } else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToRight) {\n          location = 'left';\n        } else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToLeft) {\n          location = 'right';\n        } else if (!tooltipPositionObj.hittingRight && tooltipPositionObj.closeToRight) {\n          location = 'left';\n        } else if (!tooltipPositionObj.hittingLeft && tooltipPositionObj.closeToLeft) {\n          location = 'right';\n        } else if (tooltipPositionObj.closeToBottom && tooltipPositionObj.closeToTop) {\n          location = 'top';\n        } else if (tooltipPositionObj.closeToTop) {\n          location = 'bottom';\n        }\n\n        return location;\n      }\n\n\n      /**\n       * getTooltipPositionStatus\n       */\n      function getTooltipPositionStatus(containerWidth, containerHeight, point) {\n        var rectBBox = _Chart._gBBox;\n\n        var offsetY = point.y - _Chart._baseGroupBBox.height;\n        var offsetX = point.x - _Chart._baseGroupBBox.width / 2;\n        var offsetPadding = _Chart._caretWidth;\n\n        var topY = offsetY - offsetPadding;\n        var bottomY = point.y + offsetPadding;\n        var centerY = point.y - rectBBox.height / 2;\n        var leftX = point.x - _Chart._baseGroupBBox.width - _Chart.config('caretSize');\n        var rightX = point.x + offsetPadding + 5;\n\n        var closeToRight = point.x + _Chart._baseGroupBBox.width / 2 >= containerWidth;\n        var closeToLeft = point.x - _Chart._baseGroupBBox.width / 2 <= 0;\n        var closeToTop = point.y - _Chart._baseGroupBBox.height - offsetPadding - 3 <= 0;\n        var closeToBottom = point.y + _Chart._baseGroupBBox.height > containerHeight;\n\n        var hittingRight = closeToRight && point.x - _Chart._baseGroupBBox.width - offsetPadding <= 0;\n        var hittingLeft = closeToLeft && point.x + _Chart._baseGroupBBox.width + offsetPadding >= containerWidth;\n        var hittingTop = (closeToRight || closeToLeft) && (point.y - (_Chart._baseGroupBBox.height / 2) <= 0);\n        var hittingBottom = (closeToRight || closeToLeft) && (point.y + (_Chart._baseGroupBBox.height / 2) >= containerHeight);\n\n        return {\n          offsetX: offsetX,\n          topY: topY,\n          bottomY: bottomY,\n          centerY: centerY,\n          leftX: leftX,\n          rightX: rightX,\n          closeToRight: closeToRight,\n          closeToLeft: closeToLeft,\n          closeToTop: closeToTop,\n          closeToBottom: closeToBottom,\n          hittingRight: hittingRight,\n          hittingLeft: hittingLeft,\n          hittingTop: hittingTop,\n          hittingBottom: hittingBottom\n        };\n      }\n\n\n      /**\n       * SetBaseGroupBBoxDimensions\n       * @param location position of the tooltip\n       */\n      function setBaseGroupBBoxDimensions(location) {\n        _Chart._baseGroupBBox.height =\n          location === 'top' || location === 'bottom' ?\n          _Chart._gBBox.height + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6 :\n          _Chart._gBBox.height + (_Chart.config('padding') * 2) + 6;\n\n        _Chart._baseGroupBBox.width =\n          location === 'top' || location === 'bottom' ?\n          _Chart._gBBox.width + (_Chart.config('padding') * 2) + 6 :\n          _Chart._gBBox.width + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6;\n      }\n\n\n\n\n\n      /*----------------------------------------------------------------------------------\n      // Helper Functions\n      ----------------------------------------------------------------------------------*/\n\n      /**\n       * Returns if appends is in text rect text format\n       * @param appends\n       * @returns {boolean}\n       */\n      function isTextRectText(appends) {\n        var returnVal = true;\n        for (var i = 0; i < appends.node().childNodes.length; i++) {\n          var nodeName = appends.node().childNodes[i].nodeName;\n          returnVal = (i % 2 === 0 && nodeName === 'text' ? true : (nodeName === 'rect'));\n          if (!returnVal) {\n            break;\n          }\n        }\n        return returnVal;\n      }\n\n      /**\n       * Formats appends as text rect text\n       * @param appends\n       * @param groupBBox\n       */\n      function formatAppendTextRectText(appends) {\n        var padding = 5;\n        var prevWidth = 0;\n        var groupBBox = {\n          x: 0,\n          y: 0,\n          height: 0,\n          width: 0\n        };\n\n        appends.select('rect').attr('height', 0);\n        groupBBox = appends.node().getBBox();\n\n\n        /*jshint -W083 */\n        for (var i = 0; i < appends.node().childNodes.length; i++) {\n          var element = appends.node().childNodes[i];\n\n          if (i % 2 === 0) {\n            //text\n            appends.select('text:nth-child(' + (i + 1) + ')')\n              .attr({\n                dy: function () {\n                  return getCentralPosition(this);\n                },\n                x: (prevWidth + (padding * i) + 1),\n                y: groupBBox.height / 2\n              });\n\n            prevWidth += element.getBBox().width;\n\n          } else {\n            //rect\n            appends.select('rect:nth-child(' + (i + 1) + ')')\n              .attr({\n                x: (prevWidth + (padding * i)),\n                y: 0,\n                width: 1,\n                height: groupBBox.height\n              });\n          }\n        }\n\n        appends.selectAll('tspan')\n          .attr({\n            transform: function () {\n              return 'translate(0, ' + getCentralPosition(this) + ')';\n            },\n            y: groupBBox.height / 2\n          });\n      }\n\n\n      /**\n       * setBaseGroupBBox\n       */\n      function setBaseGroupBBox() {\n        _Chart._baseGroupBBox = cloneBBox(_Chart._baseGroup.node().getBBox());\n        _Chart._baseGroupBBox.height = _Chart._baseGroupBBox.height - _Chart._caretWidth + 3;\n      }\n\n\n      /**\n       * Set gBBox's height and width to height, width if defined else\n       * it will use appends BBox.\n       * @param height\n       * @param width\n       */\n      function setGBBox(height, width) {\n        if (height !== undefined && width !== undefined) {\n          _Chart._gBBox = {\n            'height': height,\n            'width': width\n          };\n        } else {\n          _Chart._gBBox = _Chart._appends.node().getBBox();\n        }\n      }\n\n\n      /**\n       * Calculates vertical center for text\n       * @param elem\n       * @returns {number}\n       */\n      function getCentralPosition(elem) {\n        return parseInt(d3.select(elem)\n          .style('font-size'), 10) * 0.35;\n      }\n\n      /**\n       * Returns a tranlate that keeps the path in bounds.\n       * @param hittingEdge1\n       * @param hittingEdge2\n       * @param offset\n       * @param dimension\n       * @param heightOrWidth\n       * @returns {*}\n       */\n      function getPathTranslate(hittingEdge1, hittingEdge2, offset, dimension, heightOrWidth) {\n        var translate;\n\n        if (hittingEdge1) {\n          translate = heightOrWidth - _Chart._baseGroupBBox[dimension] + r;\n        } else if (hittingEdge2) {\n          translate = r;\n        } else {\n          translate = offset;\n        }\n\n        return translate;\n      }\n\n      /**\n       * UpdateCaretPath\n       * @param path\n       * @param axis\n       * @returns {.autoshot.default_options.options.path|*|.autoshot.default_options.options.local.path|options.path|options.local.path|path}\n       */\n      function updateCaretPath(path, axis) {\n        var pathString;\n        var xyString;\n\n        if (axis === 'y') {\n          xyString = _Chart[path].caretX + ' ' + (_Chart[path].caretY - _Chart._moveY);\n        } else {\n          xyString = (_Chart[path].caretX + _Chart._moveX) + ' ' + _Chart[path].caretY;\n        }\n\n        pathString = _Chart[path].path.match(/Z m (.*?) l/);\n        _Chart[path].path = _Chart[path].path.replace(pathString[1], xyString);\n        return _Chart[path].path;\n      }\n\n\n      /**\n       * OffsetCaretAtEdge\n       * @param config\n       */\n      function offsetCaretAtEdge(config) {\n        var container = config.container;\n        var point = config.point;\n        var tooltipWidth;\n        var tooltipHeight;\n        var bboxWidth;\n        var bboxHeight;\n        var mouseXOffset = container.width - point.x;\n        var mouseYOffset = point.y;\n\n        var curvedRectOffset = 2 * r; //Compensate for the curved rect path. 1 is for good measure.\n\n        bboxHeight = _Chart._gBBox.height; // - curvedRectOffset;\n        bboxWidth = _Chart._gBBox.width; //  - curvedRectOffset;\n\n\n        var farthestCaretPosition;\n\n        if (config.left || config.right) {\n\n          //Left\n          if (config.left) {\n            tooltipWidth = container.width - (_Chart._baseGroupBBox.width / 2);\n            _Chart._moveX = tooltipWidth - mouseXOffset;\n\n            if ((bboxWidth / 2) + _Chart.config('caretSize') <= _Chart._moveX) {\n              _Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n            }\n          }\n\n          //Right\n          if (config.right) {\n            tooltipWidth = _Chart._baseGroupBBox.width / 2;\n            _Chart._moveX = tooltipWidth - mouseXOffset;\n\n            if (-((bboxWidth / 2) + _Chart.config('caretSize')) >= _Chart._moveX) {\n              _Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n            }\n          }\n\n\n        } else if (config.top || config.bottom) {\n\n          //Top\n          if (config.top) {\n            tooltipHeight = _Chart._baseGroupBBox.height / 2;\n            _Chart._moveY = tooltipHeight - mouseYOffset;\n\n            farthestCaretPosition = (bboxHeight / 2) + _Chart.config('caretSize') - curvedRectOffset;\n\n            if (farthestCaretPosition <= _Chart._moveY) {\n              _Chart._moveY = farthestCaretPosition;\n            }\n          }\n\n          //Bottom\n          if (config.bottom) {\n            tooltipHeight = container.height - ((_Chart._baseGroupBBox.height) / 2);\n            _Chart._moveY = tooltipHeight - mouseYOffset;\n\n            farthestCaretPosition = -(((bboxHeight) / 2) - _Chart.config('caretSize')) - curvedRectOffset;\n\n            if (farthestCaretPosition >= _Chart._moveY) {\n              _Chart._moveY = farthestCaretPosition;\n            }\n          }\n        } else {\n          _Chart._moveX = 0;\n          _Chart._moveY = 0;\n        }\n      }\n\n\n      /**\n       * GeneratePaths\n       */\n      function generatePaths() {\n        var w = _Chart._gBBox.width + (_Chart.config('padding') * 2);\n        var h = _Chart._gBBox.height + (_Chart.config('padding') * 2);\n        var c = _Chart.config('caretSize');\n        var y = (h / 2) + _Chart.config('caretSize') + r;\n\n        _Chart._topPath = {\n          translate: 'translate(' + (w / 2) + ',' + (h + c + r) + ')',\n          caretX: ((w / 2) - c),\n          caretY: (h + (r * 2))\n        };\n        _Chart._topPath.path = 'm -' + (w / 2) + ' -' + (h + c + (r * 2)) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._topPath.caretX + ' ' + _Chart._topPath.caretY +\n          ' l ' + c + ' ' + c +\n          ' l ' + c + ' -' + c;\n\n        _Chart._bottomPath = {\n          translate: 'translate(' + (w / 2) + ',' + (-c + (r / 2)) + ')',\n          caretX: ((w / 2) - c),\n          caretY: 0\n        };\n        _Chart._bottomPath.path = 'm -' + (w / 2) + ' ' + 0 +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._bottomPath.caretX + ' ' + _Chart._bottomPath.caretY +\n          ' l ' + c + ' -' + c +\n          ' l ' + c + ' ' + c;\n\n        _Chart._leftPath = {\n          translate: 'translate(' + (w + c + r) + ',' + (h / 2) + ')',\n          caretX: (w + r),\n          caretY: y\n        };\n        _Chart._leftPath.path = 'm -' + (w + c + r) + ' ' + -((h / 2) + r) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._leftPath.caretX + ' ' + _Chart._leftPath.caretY +\n          ' l ' + c + ' -' + c +\n          ' l -' + c + ' -' + c;\n\n        _Chart._rightPath = {\n          translate: 'translate(' + -(c + r) + ',' + (h / 2) + ')',\n          caretX: -r,\n          caretY: y\n        };\n        _Chart._rightPath.path = 'm ' + (c + r) + ' ' + -((h / 2) + r) +\n          ' h ' + w +\n          ' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n          ' v ' + h +\n          ' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n          ' h -' + w +\n          ' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n          ' v -' + h +\n          ' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n          ' Z m ' + _Chart._rightPath.caretX + ' ' + _Chart._rightPath.caretY +\n          ' l -' + c + ' -' + c +\n          ' l ' + c + ' -' + c + ' Z';\n      }\n\n      /**\n       * cloneBBox, IE will not let you modify the obj returned from getBBox\n       * @param box\n       * @returns {{x: *, y: *, width: *, height: *}}\n       */\n      function cloneBBox(box) {\n        return {\n          x: box.x,\n          y: box.y,\n          width: box.width,\n          height: box.height\n        };\n      }\n    }\n    preDraw() {\n      this._container = this.config('container');\n    }\n  }\n\n  // Export\n  var chart = Tooltip;\n\n  return chart;\n\n}));\n"]}